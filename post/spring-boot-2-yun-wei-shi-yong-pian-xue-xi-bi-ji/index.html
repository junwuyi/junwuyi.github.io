<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Spring Boot 2 运维实用篇学习笔记 - 君无意博客</title>
<link rel="shortcut icon" href="https://junwuyi.github.io/favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css">
<link rel="stylesheet" href="https://junwuyi.github.io/media/css/tailwind.css">
<link rel="stylesheet" href="https://junwuyi.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Spring Boot 2 运维实用篇学习笔记 - 君无意博客 - Atom Feed" href="https://junwuyi.github.io/atom.xml">

    

  <meta name="description" content="Spring Boot 2 基础篇学习笔记

内容介绍与课程目标
51-工程打包与运行

程序为什么要打包
SpringBoot项目快速启动（Windows版）

步骤
打包优化：跳过 test 生命周期


小结:


52-打包插件

..." />
  <meta property="og:title" content="Spring Boot 2 运维实用篇学习笔记 - 君无意博客">
  <meta property="og:description" content="Spring Boot 2 基础篇学习笔记

内容介绍与课程目标
51-工程打包与运行

程序为什么要打包
SpringBoot项目快速启动（Windows版）

步骤
打包优化：跳过 test 生命周期


小结:


52-打包插件

..." />
  <meta property="og:type" content="articles">
  <meta property="og:url" content="https://junwuyi.github.io/post/spring-boot-2-yun-wei-shi-yong-pian-xue-xi-bi-ji/" />
  <meta property="og:image" content="https://junwuyi.github.io/images/avatar.png">
  <meta property="og:image:height" content="630">
  <meta property="og:image:width" content="1200">
  <meta name="twitter:title" content="Spring Boot 2 运维实用篇学习笔记 - 君无意博客">
  <meta name="twitter:description" content="Spring Boot 2 基础篇学习笔记

内容介绍与课程目标
51-工程打包与运行

程序为什么要打包
SpringBoot项目快速启动（Windows版）

步骤
打包优化：跳过 test 生命周期


小结:


52-打包插件

...">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://junwuyi.github.io/post/spring-boot-2-yun-wei-shi-yong-pian-xue-xi-bi-ji/">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
 
  
    <link rel="stylesheet" href="https://junwuyi.github.io/media/css/prism-atom-dark.css">
  

  
</head>

<body>
  <div class="antialiased flex flex-col min-h-screen" id="app">
	<div class="nav py-3 md:py-8 fixed w-full z-10 bg-gray-50 dark:bg-gray-700 transition-all duration-300" :class="{ 'scroll': scrolled }">
  <div class="flex justify-end px-4">
    <div class="w-8 h-8 flex justify-center items-center rounded-full md:hidden" @click="showMenu = !showMenu">
      <i class="ri-close-line" v-show="showMenu"></i>
      <i class="ri-menu-3-line" v-show="!showMenu"></i>
    </div>
  </div>
  <nav class="max-w-4xl w-full mx-auto text-center flex flex-col md:flex-row justify-center md:block" :class="`${ showMenu ? 'block' : 'hidden' }`">
    
      <a href="/" target="" class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
        首页
      </a>
    
      <a href="/archives" target="" class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
        归档
      </a>
    
      <a href="/tags" target="" class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
        标签
      </a>
    
      <a href="/about" target="" class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
        关于
      </a>
    
    <a href="https://junwuyi.github.io/atom.xml" target="_blank" class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
      RSS
    </a>
  </nav>
</div>
    <div class="max-w-4xl w-full mx-auto">
      <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 md:pt-64 px-4 md:px-8 pb-8 animated fadeIn mb-8">
        <h1 class="text-5xl font-semibold leading-normal pb-8 mb-8 border-b-8 border-gray-700">
          Spring Boot 2 运维实用篇学习笔记
        </h1>
        
        <div class="mb-8 flex flex-wrap">
          <div class="text-gray-400 text-sm mr-4">2021-11-21 · 21 min read</div>
          
            <a href="https://junwuyi.github.io/tag/6qrlxS0uU/" class="text-gray-700 text-sm border-b-2 border-dotted border-gray-200 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
              <i class="ri-hashtag"></i>
              SpringBoot
            </a>
          
        </div>
        <div class="markdown mb-8" v-pre>
          <p><a href="https://blog.csdn.net/qq_42324086/article/details/121184789">Spring Boot 2 基础篇学习笔记</a><br>
<ul class="markdownIt-TOC">
<li><a href="#%E5%86%85%E5%AE%B9%E4%BB%8B%E7%BB%8D%E4%B8%8E%E8%AF%BE%E7%A8%8B%E7%9B%AE%E6%A0%87">内容介绍与课程目标</a></li>
<li><a href="#51-%E5%B7%A5%E7%A8%8B%E6%89%93%E5%8C%85%E4%B8%8E%E8%BF%90%E8%A1%8C">51-工程打包与运行</a>
<ul>
<li><a href="#%E7%A8%8B%E5%BA%8F%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%89%93%E5%8C%85">程序为什么要打包</a></li>
<li><a href="#springboot%E9%A1%B9%E7%9B%AE%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8windows%E7%89%88">SpringBoot项目快速启动（Windows版）</a>
<ul>
<li><a href="#%E6%AD%A5%E9%AA%A4">步骤</a></li>
<li><a href="#%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96%E8%B7%B3%E8%BF%87-test-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">打包优化：跳过 test 生命周期</a></li>
</ul>
</li>
<li><a href="#%E5%B0%8F%E7%BB%93">小结:</a></li>
</ul>
</li>
<li><a href="#52-%E6%89%93%E5%8C%85%E6%8F%92%E4%BB%B6">52-打包插件</a>
<ul>
<li><a href="#%E5%8F%AF%E6%89%A7%E8%A1%8Cjar%E5%8C%85%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">可执行jar包目录结构</a></li>
<li><a href="#jar%E5%8C%85%E6%8F%8F%E8%BF%B0%E6%96%87%E4%BB%B6manifestmf">jar包描述文件（MANIFEST.MF）</a></li>
<li><a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%90%AF%E5%8A%A8%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">命令行启动常见问题及解决方案</a></li>
<li><a href="#%E5%B0%8F%E7%BB%93-2">小结:</a></li>
</ul>
</li>
<li><a href="#53-boot%E5%B7%A5%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8linux%E7%89%88">53-Boot工程快速启动（Linux版）</a>
<ul>
<li><a href="#%E5%90%AF%E5%8A%A8%E6%88%90%E5%8A%9F%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE">启动成功无法访问</a>
<ul>
<li><a href="#%E6%B7%BB%E5%8A%A0-80-%E7%AB%AF%E5%8F%A3">添加 80 端口</a></li>
</ul>
</li>
<li><a href="#%E5%90%8E%E5%8F%B0%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4">后台启动命令</a></li>
<li><a href="#%E5%81%9C%E6%AD%A2%E6%9C%8D%E5%8A%A1">停止服务</a></li>
<li><a href="#%E5%B0%8F%E7%BB%93-3">小结:</a></li>
<li><a href="#%E6%80%BB%E7%BB%93">总结:</a></li>
</ul>
</li>
<li><a href="#54-%E4%B8%B4%E6%97%B6%E5%B1%9E%E6%80%A7">54-临时属性</a>
<ul>
<li><a href="#%E5%B1%9E%E6%80%A7%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%85%88%E9%A1%BA%E5%BA%8F">属性加载优先顺序</a></li>
</ul>
</li>
<li><a href="#55-%E4%B8%B4%E6%97%B6%E5%B1%9E%E6%80%A7%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">55-临时属性（开发环境）</a></li>
<li><a href="#56-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B64%E7%BA%A7%E5%88%86%E7%B1%BB">56-配置文件4级分类</a>
<ul>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%88%86%E7%B1%BB">配置文件分类</a></li>
</ul>
</li>
<li><a href="#57-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">57-自定义配置文件</a></li>
<li><a href="#58-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91yaml%E7%89%88">58-多环境开发（yaml版）</a></li>
<li><a href="#59-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91%E5%A4%9A%E6%96%87%E4%BB%B6%E7%89%88yaml%E7%89%88">59-多环境开发多文件版（yaml版）</a>
<ul>
<li><a href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91yaml%E7%89%88%E5%A4%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F">多环境开发（YAML版）多配置文件格式</a></li>
<li><a href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B9%A6%E5%86%99%E6%8A%80%E5%B7%A7%E4%B8%80">多环境开发配置文件书写技巧（一）</a></li>
</ul>
</li>
<li><a href="#60-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91%E5%A4%9A%E6%96%87%E4%BB%B6%E7%89%88properties%E7%89%88">60-多环境开发多文件版（properties版）</a></li>
<li><a href="#61-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%88%86%E7%BB%84%E7%AE%A1%E7%90%86">61-多环境分组管理</a>
<ul>
<li><a href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91%E7%8B%AC%E7%AB%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B9%A6%E5%86%99%E6%8A%80%E5%B7%A7%E4%BA%8C">多环境开发独立配置文件书写技巧（二）</a></li>
</ul>
</li>
<li><a href="#62-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91%E6%8E%A7%E5%88%B6">62-多环境开发控制</a></li>
<li><a href="#63-%E6%97%A5%E5%BF%97%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C">63-日志基础操作</a></li>
<li><a href="#64-%E6%95%99%E4%BD%A0%E4%B8%80%E6%8B%9B%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BA%E6%97%A5%E5%BF%97%E5%AF%B9%E8%B1%A1">64-教你一招：快速创建日志对象</a></li>
<li><a href="#65-%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F%E6%8E%A7%E5%88%B6">65-日志输出格式控制</a></li>
<li><a href="#66-%E6%96%87%E4%BB%B6%E8%AE%B0%E5%BD%95%E6%97%A5%E5%BF%97%E8%BF%90%E7%BB%B4%E5%AE%9E%E7%94%A8%E7%AF%87%E5%AE%8C%E7%BB%93">66-文件记录日志（运维实用篇完结）</a></li>
</ul>
</p>
<h1 id="内容介绍与课程目标">内容介绍与课程目标</h1>
<p>内容介绍</p>
<ul>
<li>打包与运行</li>
<li>配置高级</li>
<li>多环境开发</li>
<li>日志</li>
</ul>
<p>课程目标：</p>
<ul>
<li>能够掌握SpringBoot程序多环境开发</li>
<li>能够基于Linux系统发布SpringBoot工程</li>
<li>能够解决线上灵活配置SpringBoot工程的需求</li>
</ul>
<h1 id="51-工程打包与运行">51-工程打包与运行</h1>
<h2 id="程序为什么要打包">程序为什么要打包</h2>
<p>将程序部署在独立的服务器上<br>
<img src="https://img-blog.csdnimg.cn/img_convert/ab8d2df714d42356c71b0f13f92d20e9.png" alt="image.png" loading="lazy"></p>
<h2 id="springboot项目快速启动windows版">SpringBoot项目快速启动（Windows版）</h2>
<h3 id="步骤">步骤</h3>
<p>①：对SpringBoot项目打包（执行Maven构建指令package）<br>
执行 package 打包命令之前 先执行 <strong>mvn clean</strong> 删除 target 目录及内容</p>
<pre><code>mvn package
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/img_convert/f806bb3c8544f33ec010bab7d25b02bb.png" alt="image.png" loading="lazy"><br>
打包完成 生成对应的 jar 文件<br>
<img src="https://img-blog.csdnimg.cn/img_convert/aadc7af46bb5f273b03bbf1f05856e1b.png" alt="image.png" loading="lazy"><br>
<strong>可能出现的问题:	IDEA下 执行 Maven 命令控制台中文乱码</strong><br>
Ctr+Alt+S 打开设置，在Build，Execution ，Deployment找到Build Tools下Maven项下的Runner ，在VM Options 添加<br>
-Dfile.encoding=GB2312 ，点击OK。<br>
<img src="https://img-blog.csdnimg.cn/img_convert/b5b5318fb3ab2881dd3390c7427ced55.png" alt="image.png" loading="lazy"></p>
<p>②：运行项目（执行启动指令） java -jar &lt;打包文件名&gt;</p>
<pre><code>java –jar springboot.jar
</code></pre>
<p>注意事项：<br>
jar支持命令行启动需要依赖maven插件支持，请确认打包时是否具有SpringBoot对应的maven插件</p>
<pre><code class="language-xml">    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/img_convert/40ad8c77bd7bd529b61c5bc01242ffd4.png" alt="image.png" loading="lazy"><br>
地址栏输入 cmd 回车<br>
<img src="https://img-blog.csdnimg.cn/img_convert/0016c8a2a1d291e54fd50ce3a87b77ad.png" alt="image.png" loading="lazy"><br>
执行 java -jar springboot_08_ssmp-0.0.1-SNAPSHOT.jar<br>
<img src="https://img-blog.csdnimg.cn/img_convert/a4ca10991375676ce6c0290662852adf.png" alt="image.png" loading="lazy"><br>
③：浏览器访问:	<a href="http://localhost/pages/books.html">http://localhost/pages/books.html</a></p>
<h3 id="打包优化跳过-test-生命周期">打包优化：跳过 test 生命周期</h3>
<p><img src="https://img-blog.csdnimg.cn/img_convert/01533f23027c4bb8579eee0e726ba369.png" alt="image.png" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/img_convert/fd7a1ee45ea66c2aa98208a0899a39f6.png" alt="image.png" loading="lazy"></p>
<h2 id="小结">小结:</h2>
<ol>
<li>SpringBoot工程可以基于java环境下独立运行jar文件启动服务</li>
<li>SpringBoot工程执行mvn命令package进行打包</li>
<li>执行jar命令：java –jar 工程名.jar</li>
</ol>
<h1 id="52-打包插件">52-打包插件</h1>
<p>如果没有配制spring boot 打包插件可能遇到下面的问题:<br>
<img src="https://img-blog.csdnimg.cn/img_convert/70d95f157126511ccc2ffc6e19f899d4.png" alt="image.png" loading="lazy"></p>
<ul>
<li>使用SpringBoot提供的maven插件可以将工程打包成可执行jar包</li>
</ul>
<pre><code class="language-xml">    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
</code></pre>
<h2 id="可执行jar包目录结构">可执行jar包目录结构</h2>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdnimg.cn/img_convert/35f27fe78e4ca242139ac84ce1391af7.png" alt="image.png" loading="lazy"></figure>
<h2 id="jar包描述文件manifestmf">jar包描述文件（MANIFEST.MF）</h2>
<ul>
<li>普通工程</li>
</ul>
<pre><code>Manifest-Version: 1.0
Implementation-Title: springboot_08_ssmp
Implementation-Version: 0.0.1-SNAPSHOT
Build-Jdk-Spec: 1.8
Created-By: Maven Jar Plugin 3.2.0
</code></pre>
<ul>
<li>基于spring-boot-maven-plugin打包的工程</li>
</ul>
<pre><code>Manifest-Version: 1.0
Spring-Boot-Classpath-Index: BOOT-INF/classpath.idx
Implementation-Title: springboot_08_ssmp
Implementation-Version: 0.0.1-SNAPSHOT
Spring-Boot-Layers-Index: BOOT-INF/layers.idx
Start-Class: com.example.SSMPApplication 启动类
Spring-Boot-Classes: BOOT-INF/classes/
Spring-Boot-Lib: BOOT-INF/lib/
Build-Jdk-Spec: 1.8
Spring-Boot-Version: 2.5.6
Created-By: Maven Jar Plugin 3.2.0
Main-Class: org.springframework.boot.loader.JarLauncher  jar启动器
</code></pre>
<h2 id="命令行启动常见问题及解决方案">命令行启动常见问题及解决方案</h2>
<ul>
<li>Windonws端口被占用</li>
</ul>
<pre><code># 查询端口
netstat -ano
# 查询指定端口
netstat -ano |findstr &quot;端口号&quot;
# 根据进程PID查询进程名称
tasklist |findstr &quot;进程PID号&quot;
# 根据PID杀死任务
taskkill /F /PID &quot;进程PID号&quot;
# 根据进程名称杀死任务
taskkill -f -t -im &quot;进程名称&quot;
</code></pre>
<pre><code>D:\code\Java\IdeaProjects\springboot-study\springboot_08_ssmp\target&gt;netstat -ano

活动连接

  协议  	 本地地址          		  外部地址       					 状态           PID
  TCP    0.0.0.0:80             0.0.0.0:0              LISTENING       30988
  TCP    0.0.0.0:135            0.0.0.0:0              LISTENING       1792
  TCP    0.0.0.0:443            0.0.0.0:0              LISTENING       9400
  TCP    0.0.0.0:445            0.0.0.0:0              LISTENING       4
  TCP    0.0.0.0:902            0.0.0.0:0              LISTENING       6188
  TCP    0.0.0.0:912            0.0.0.0:0              LISTENING       6188
 
D:\code\Java\IdeaProjects\springboot-study\springboot_08_ssmp\target&gt;netstat -ano |findstr &quot;80&quot;
  TCP    0.0.0.0:80             0.0.0.0:0              LISTENING       30988
  TCP    0.0.0.0:7680           0.0.0.0:0              LISTENING       4864
  TCP    0.0.0.0:8680           0.0.0.0:0              LISTENING       7976
  TCP    192.168.1.102:9808     119.96.138.240:443     ESTABLISHED     20604
  TCP    [::]:80                [::]:0                 LISTENING       30988
  TCP    [::]:7680              [::]:0                 LISTENING       4864
  UDP    127.0.0.1:65312        *:*                                    5680
  UDP    [fe80::2952:170d:f2f2:1464%16]:1900  *:*                                    2872
  UDP    [fe80::2952:170d:f2f2:1464%16]:60720  *:*                                    2872
  UDP    [fe80::4c2b:9d2f:a625:8b1c%6]:1900  *:*                                    2872
  UDP    [fe80::4c2b:9d2f:a625:8b1c%6]:60719  *:*                                    2872
  UDP    [fe80::e1e0:a2c9:200:2f34%19]:1900  *:*                                    2872
  UDP    [fe80::e1e0:a2c9:200:2f34%19]:60721  *:*                                    2872
  
  
D:\code\Java\IdeaProjects\springboot-study\springboot_08_ssmp\target&gt;tasklist |findstr &quot;30988&quot;
java.exe                     30988 Console                    3    273,388 K


D:\code\Java\IdeaProjects\springboot-study\springboot_08_ssmp\target&gt;tasklist

映像名称                       PID 会话名              会话#       内存使用
========================= ======== ================ =========== ============
System Idle Process              0 Services                   0          8 K
System                           4 Services                   0      1,500 K
Registry                       172 Services                   0     94,584 K
smss.exe                       648 Services                   0      1,084 K
csrss.exe                     1080 Services                   0      5,888 K
wininit.exe                   1320 Services                   0      6,868 K
services.exe                  1436 Services                   0      9,264 K
lsass.exe                     1488 Services                   0     11,932 K
svchost.exe                   1612 Services                   0     17,804 K
fontdrvhost.exe               1648 Services                   0        488 K
WUDFHost.exe                  1688 Services                   0      2,660 K
svchost.exe                   1792 Services                   0     13,428 K
WUDFHost.exe                  1840 Services                   0      2,628 K
svchost.exe                   1868 Services                   0      3,460 K


D:\code\Java\IdeaProjects\springboot-study\springboot_08_ssmp\target&gt;taskkill /F /PID &quot;30988&quot;
成功: 已终止 PID 为 30988 的进程。
</code></pre>
<h2 id="小结-2">小结:</h2>
<ol>
<li>spring-boot-maven-plugin插件作用</li>
<li>Windonws端口被占用</li>
</ol>
<h1 id="53-boot工程快速启动linux版">53-Boot工程快速启动（Linux版）</h1>
<figure data-type="image" tabindex="2"><img src="https://img-blog.csdnimg.cn/img_convert/80846308dc04e36693e023795d8a06b1.png" alt="image.png" loading="lazy"></figure>
<ul>
<li>基于Linux（CenterOS7）</li>
<li>安装JDK，且版本不低于打包时使用的JDK版本
<ul>
<li>可以使用 yum 安装</li>
</ul>
</li>
<li>安装 MySQL
<ul>
<li>可以参考: <a href="https://blog.csdn.net/qq_42324086/article/details/120579197">https://blog.csdn.net/qq_42324086/article/details/120579197</a></li>
</ul>
</li>
<li>安装包保存在/usr/local/自定义目录中或$HOME下</li>
<li>其他操作参照Windows版进行</li>
</ul>
<h2 id="启动成功无法访问">启动成功无法访问</h2>
<h3 id="添加-80-端口">添加 80 端口</h3>
<ul>
<li>添加 端口</li>
</ul>
<pre><code class="language-bash">firewall-cmd --zone=public --permanent --add-port=80/tcp
</code></pre>
<ul>
<li>重启</li>
</ul>
<pre><code class="language-bash">systemctl restart firewalld
</code></pre>
<h2 id="后台启动命令">后台启动命令</h2>
<pre><code class="language-bash">nohup java -jar springboot_08_ssmp-0.0.1-SNAPSHOT.jar &gt; server.log 2&gt;&amp;1 &amp;
</code></pre>
<h2 id="停止服务">停止服务</h2>
<ul>
<li>ps -ef | grep &quot;java -jar&quot;</li>
<li>kill -9 PID</li>
<li>cat server.log (查看日志)</li>
</ul>
<pre><code class="language-bash">[root@cjbCentos01 app]# ps -ef | grep &quot;java -jar&quot;
UID         PID   PPID  C STIME TTY          TIME CMD
root       6848   6021  7 14:45 pts/2    00:00:19 java -jar springboot_08_ssmp-0.0.1-SNAPSHOT.jar
root       6919   6021  0 14:49 pts/2    00:00:00 grep --color=auto java -jar
[root@cjbCentos01 app]# kill -9 6848
[root@cjbCentos01 app]# ps -ef | grep &quot;java -jar&quot;
root       7016   6021  0 14:52 pts/2    00:00:00 grep --color=auto java -jar
[1]+  已杀死               nohup java -jar springboot_08_ssmp-0.0.1-SNAPSHOT.jar &gt; server.log 2&gt;&amp;1
[root@cjbCentos01 app]# 

</code></pre>
<h2 id="小结-3">小结:</h2>
<ol>
<li>上传安装包</li>
<li>执行jar命令：java –jar 工程名.jar</li>
</ol>
<h2 id="总结">总结:</h2>
<ol>
<li>Boot程序打包依赖SpringBoot对应的Maven插件即可打包出可执行的jar包</li>
<li>运行jar包使用jar命令进行</li>
<li>Windows与Linux下执行Boot打包程序流程相同，仅需确保运行环境有效即可</li>
</ol>
<h1 id="54-临时属性">54-临时属性</h1>
<figure data-type="image" tabindex="3"><img src="https://img-blog.csdnimg.cn/img_convert/00250c08fd078a09e38cfc777f2a6e30.png" alt="image.png" loading="lazy"></figure>
<ul>
<li>带属性数启动SpringBoot</li>
</ul>
<pre><code class="language-bash">java -jar springboot_08_ssmp-0.0.1-SNAPSHOT.jar --server.port=8080
</code></pre>
<ul>
<li>携带多个属性启动SpringBoot，属性间使用空格分隔</li>
</ul>
<h2 id="属性加载优先顺序">属性加载优先顺序</h2>
<ol>
<li>参看 <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config">https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config</a></li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/img_convert/c0465f0f841336a9f3e6c8a43558c41d.png" alt="image.png" loading="lazy"><br>
小结:</p>
<ol>
<li>使用jar命令启动SpringBoot工程时可以使用临时属性替换配置文件中的属性</li>
<li>临时属性添加方式：java –jar 工程名.jar --属性名=值</li>
<li>多个临时属性之间使用空格分隔</li>
<li>临时属性必须是当前boot工程支持的属性，否则设置无效</li>
</ol>
<h1 id="55-临时属性开发环境">55-临时属性（开发环境）</h1>
<figure data-type="image" tabindex="4"><img src="https://img-blog.csdnimg.cn/img_convert/cbd760661547dc8a32c78fe5275ebd46.png" alt="image.png" loading="lazy"></figure>
<ul>
<li>带属性启动SpringBoot程序，为程序添加运行属性</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/img_convert/7f0f706308f900b8e8c84c5da49b0eef.png" alt="image.png" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/img_convert/33c79353fd3f41ede3e0d852a3c32035.png" alt="image.png" loading="lazy"><br>
在启动类中 main 可以通过 System.out.println(Arrays.toString(args)); 查看配制的属性</p>
<ul>
<li>通过编程形式带参数启动SpringBoot程序，为程序添加运行参数</li>
</ul>
<pre><code class="language-java">public static void main(String[] args) {
	String[] arg = new String[1];
	arg[0] = &quot;--server.port=8080&quot;;
	SpringApplication.run(SSMPApplication.class, arg);
}
</code></pre>
<ul>
<li>不携带参数启动SpringBoot程序</li>
</ul>
<pre><code class="language-java">public static void main(String[] args) {
    //可以在启动boot程序时断开读取外部临时配置对应的入口，也就是去掉读取外部参数的形参
	SpringApplication.run(SSMPApplication.class);
}
</code></pre>
<p>小结:</p>
<ol>
<li>启动SpringBoot程序时，可以选择是否使用命令行属性为SpringBoot程序传递启动属性</li>
</ol>
<h1 id="56-配置文件4级分类">56-配置文件4级分类</h1>
<figure data-type="image" tabindex="5"><img src="https://img-blog.csdnimg.cn/img_convert/28fb89c70d79a60d4255054072cba77f.png" alt="image.png" loading="lazy"></figure>
<h2 id="配置文件分类">配置文件分类</h2>
<ol>
<li>SpringBoot中4级配置文件
<ol>
<li>1级：file ：config/application.yml <strong>【最高】</strong></li>
<li>2级：file ：application.yml</li>
<li>3级：classpath：config/application.yml</li>
<li>4级：classpath：application.yml <strong>【最低】</strong></li>
</ol>
</li>
<li>作用：
<ol>
<li>1级与2级留做系统打包后设置通用属性，1级常用于运维经理进行线上整体项目部署方案调控</li>
<li>3级与4级用于系统开发阶段设置通用属性，3级常用于项目经理进行整体项目属性调控</li>
</ol>
</li>
</ol>
<p>思 考:<br>
如果yml与properties在不同层级中共存会是什么效果？<br>
例：类路径application.properties属性是否覆盖文件系统config目录中application.yml属性<br>
properties文件的优先级大于yml文件 (properties文件会覆盖yml文件的配制)<br>
​</p>
<p>小结:</p>
<ol>
<li>配置文件分为4种<br>
项目类路径配置文件：服务于开发人员本机开发与测试<br>
项目类路径config目录中配置文件：服务于项目经理整体调控<br>
工程路径配置文件：服务于运维人员配置涉密线上环境<br>
工程路径config目录中配置文件：服务于运维经理整体调控</li>
<li>多层级配置文件间的属性采用叠加并覆盖的形式作用于程序</li>
</ol>
<h1 id="57-自定义配置文件">57-自定义配置文件</h1>
<figure data-type="image" tabindex="6"><img src="https://img-blog.csdnimg.cn/img_convert/17f4bdc7002679ed1800a32887b32f7c.png" alt="image.png" loading="lazy"></figure>
<ul>
<li>通过启动参数加载配置文件（无需书写配置文件扩展名) --spring.config.name=ebank</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/img_convert/17dba20aaac666832c0bb3de5665d294.png" alt="image.png" loading="lazy"><br>
properties与yml文件格式均支持<br>
​</p>
<ul>
<li>通过启动参数加载指定文件路径下的配置文件 --spring.config.location=classpath:/ebank.yml</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/img_convert/b35d55e4ec222afad45ff3357a5999fe.png" alt="image.png" loading="lazy"><br>
properties与yml文件格式均支持</p>
<ul>
<li>通过启动参数加载指定文件路径下的配置文件时可以加载多个配置,后面的会覆盖前面的</li>
</ul>
<pre><code class="language-bash">--spring.config.location=classpath:/ebank.yml,classpath:/ebank-server.yml
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/img_convert/00fa952d9b0e3e73345fa84d6d6ab079.png" alt="image.png" loading="lazy"><br>
注意事项:<br>
多配置文件常用于将配置进行分类，进行独立管理，或将可选配置单独制作便于上线更新维护<br>
​</p>
<p><strong>自定义配置文件——重要说明</strong></p>
<ul>
<li>单服务器项目：使用自定义配置文件需求较低</li>
<li>多服务器项目：使用自定义配置文件需求较高，将所有配置放置在一个目录中，统一管理</li>
<li>基于SpringCloud技术，所有的服务器将不再设置配置文件，而是通过配置中心进行设定，动态加载配置信息</li>
</ul>
<p>小结:</p>
<ol>
<li>配置文件可以修改名称，通过启动参数设定</li>
<li>配置文件可以修改路径，通过启动参数设定</li>
<li>微服务开发中配置文件通过配置中心进行设置</li>
</ol>
<p>总结:</p>
<ol>
<li>SpringBoot在开发和运行环境均支持使用临时参数修改工程配置</li>
<li>SpringBoot支持4级配置文件，应用于开发与线上环境进行配置的灵活设置</li>
<li>SpringBoot支持使用自定义配置文件的形式修改配置文件存储位置</li>
<li>基于微服务开发时配置文件将使用配置中心进行管理</li>
</ol>
<h1 id="58-多环境开发yaml版">58-多环境开发（yaml版）</h1>
<p>多环境<br>
<img src="https://img-blog.csdnimg.cn/img_convert/8fd600d1f34d1c80cb86671b4e99a638.png" alt="image.png" loading="lazy"><br>
多环境开发（YAML版）<br>
<img src="https://img-blog.csdnimg.cn/img_convert/cf40efa2028ab24ad72481558a56b7ac.png" alt="image.png" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/img_convert/644c8d460616b3fda1b7c8bdb9c5a1e7.png" alt="image.png" loading="lazy"></p>
<pre><code class="language-yaml">#应用环境
#公共配制
spring:
  profiles:
    active: dev


#设置环境
#开发环境
---
spring:
  config:
    activate:
      on-profile: dev
server:
  port: 81

#生产环境
---
spring:
  profiles: pro
server:
  port: 80

#测试环境
---
spring:
  profiles: test
server:
  port: 82
</code></pre>
<p>小结:</p>
<ol>
<li>多环境开发需要设置若干种常用环境，例如开发、生产、测试环境</li>
<li>yaml格式中设置多环境使用---区分环境设置边界</li>
<li>每种环境的区别在于加载的配置属性不同</li>
<li>启用某种环境时需要指定启动时使用该环境</li>
</ol>
<h1 id="59-多环境开发多文件版yaml版">59-多环境开发多文件版（yaml版）</h1>
<figure data-type="image" tabindex="7"><img src="https://img-blog.csdnimg.cn/img_convert/1aa65d7c3cc15d3cae4394a50fa158ea.png" alt="image.png" loading="lazy"></figure>
<h2 id="多环境开发yaml版多配置文件格式">多环境开发（YAML版）多配置文件格式</h2>
<ol>
<li>主启动配置文件application.yml</li>
</ol>
<pre><code class="language-yaml">#应用环境
#公共配制
spring:
  profiles:
    active: test

</code></pre>
<ol start="2">
<li>环境分类配置文件application-<strong>pro</strong>.yml</li>
</ol>
<pre><code class="language-java">server:
  port: 81
</code></pre>
<ol start="3">
<li>环境分类配置文件application-<strong>dev</strong>.yml</li>
</ol>
<pre><code class="language-java">server:
  port: 82
</code></pre>
<ol start="4">
<li>环境分类配置文件application-<strong>test</strong>.yml</li>
</ol>
<pre><code class="language-java">server:
  port: 83
</code></pre>
<h2 id="多环境开发配置文件书写技巧一">多环境开发配置文件书写技巧（一）</h2>
<ul>
<li>主配置文件中设置公共配置（全局）</li>
<li>环境分类配置文件中常用于设置冲突属性（局部）</li>
</ul>
<p>小结:</p>
<ol>
<li>可以使用独立配置文件定义环境属性</li>
<li>独立配置文件便于线上系统维护更新并保障系统安全性</li>
</ol>
<h1 id="60-多环境开发多文件版properties版">60-多环境开发多文件版（properties版）</h1>
<ul>
<li>主启动配置文件application.properties</li>
</ul>
<pre><code>spring.profiles.active=dev
</code></pre>
<ul>
<li>环境分类配置文件application-<strong>pro</strong>.properties</li>
</ul>
<pre><code>server.port=9081
</code></pre>
<ul>
<li>环境分类配置文件application-<strong>dev</strong>.properties</li>
</ul>
<pre><code>server.port=9082
</code></pre>
<ul>
<li>环境分类配置文件application-<strong>test</strong>.properties</li>
</ul>
<pre><code>server.port=9083
</code></pre>
<p>小结:</p>
<ol>
<li>properties文件多环境配置仅支持多文件格式</li>
</ol>
<h1 id="61-多环境分组管理">61-多环境分组管理</h1>
<h2 id="多环境开发独立配置文件书写技巧二">多环境开发独立配置文件书写技巧（二）</h2>
<ul>
<li>根据功能对配置文件中的信息进行拆分，并制作成独立的配置文件，命名规则如下
<ul>
<li>application-devDB.yml</li>
<li>application-devRedis.yml</li>
<li>application-devMVC.yml</li>
</ul>
</li>
<li>使用include属性在激活指定环境的情况下，同时对多个环境进行加载使其生效，多个环境间使用逗号分隔</li>
</ul>
<pre><code class="language-yaml">spring:
  profiles:
    active: dev
    include: devDB,devMVC
</code></pre>
<p>注意事项:<br>
<strong>当主环境dev与其他环境有相同属性时，主环境属性生效；其他环境中有相同属性时，最后加载的环境属性生效</strong></p>
<pre><code class="language-yaml">The following profiles are active: devDB,devMVC,dev
</code></pre>
<p><strong>​</strong></p>
<ul>
<li>从Spring2.4版开始使用group属性替代include属性，降低了配置书写量</li>
<li>使用<strong>group</strong>属性定义多种主环境与子环境的包含关系</li>
</ul>
<pre><code class="language-yaml">spring:
  profiles:
    active: dev
    group:
      &quot;dev&quot;: devDB,devMVC
      &quot;pro&quot;: proDB,proMVC
      &quot;test&quot;: testDB,testRedis,testMVC
</code></pre>
<p>注意事项:<br>
<strong>使用group属性，会覆盖 主环境dev (active) 的内容，最后加载的环境属性生效</strong></p>
<pre><code class="language-yaml">The following profiles are active: dev,devDB,devMVC
</code></pre>
<p>小结：</p>
<ol>
<li>多环境开发使用group属性设置配置文件分组，便于线上维护管理</li>
</ol>
<h1 id="62-多环境开发控制">62-多环境开发控制</h1>
<p><img src="https://img-blog.csdnimg.cn/img_convert/35dfd3ba820eeda9b5108fa134c0b9b7.png" alt="image.png" loading="lazy"><br>
Maven与SpringBoot多环境兼容<br>
①：Maven中设置多环境属性</p>
<pre><code class="language-xml">    &lt;!--Maven中设置多环境属性--&gt;
    &lt;profiles&gt;
        &lt;profile&gt;
            &lt;id&gt;dev_env&lt;/id&gt;
            &lt;properties&gt;
                &lt;profile.active&gt;dev&lt;/profile.active&gt;
            &lt;/properties&gt;
            &lt;activation&gt;
                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
            &lt;/activation&gt;
        &lt;/profile&gt;
        &lt;profile&gt;
            &lt;id&gt;pro_env&lt;/id&gt;
            &lt;properties&gt;
                &lt;profile.active&gt;pro&lt;/profile.active&gt;
            &lt;/properties&gt;

        &lt;/profile&gt;
        &lt;profile&gt;
            &lt;id&gt;test_env&lt;/id&gt;
            &lt;properties&gt;
                &lt;profile.active&gt;test&lt;/profile.active&gt;
            &lt;/properties&gt;
        &lt;/profile&gt;
    &lt;/profiles&gt;
</code></pre>
<p>②：SpringBoot中引用Maven属性</p>
<pre><code class="language-yaml">spring:
  profiles:
    active: @profile.active@
    group:
      &quot;dev&quot;: devDB,devMVC
      &quot;pro&quot;: proDB,proMVC
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/img_convert/16c8a5b48611896ab3f94a6915322893.png" alt="image.png" loading="lazy"><br>
③：执行Maven打包指令，并在生成的boot打包文件.jar文件中查看对应信息<br>
问题：<strong>修改pom.xml 文件后，启动没有生效 手动 compile 即可</strong><br>
<img src="https://img-blog.csdnimg.cn/img_convert/5b35e9530a6c9b84d1a590b08392716a.png" alt="image.png" loading="lazy"><br>
或者 设置 IDEA进行自动编译<br>
<img src="https://img-blog.csdnimg.cn/img_convert/c3b20b8b674f4c4339c22daded35bbd1.png" alt="image.png" loading="lazy"><br>
小结：</p>
<ol>
<li>当Maven与SpringBoot同时对多环境进行控制时，以Mavn为主，SpringBoot使用@..@占位符读取Maven对应的配置属性值</li>
<li>基于SpringBoot读取Maven配置属性的前提下，如果在Idea下测试工程时pom.xml每次更新需要手动compile方可生效</li>
</ol>
<p>总结：</p>
<ol>
<li>多环境开发（YAML版）</li>
<li>多环境开发（Properties版）</li>
<li>Maven与SpringBoot多环境冲突现象解决方案</li>
</ol>
<h1 id="63-日志基础操作">63-日志基础操作</h1>
<p>日志（log）作用</p>
<ol>
<li>编程期调试代码</li>
<li>运营期记录信息</li>
</ol>
<ul>
<li>记录日常运营重要信息（峰值流量、平均响应时长……）</li>
<li>记录应用报错信息（错误堆栈）</li>
<li>记录运维过程数据（扩容、宕机、报警……）</li>
</ul>
<p>代码中使用日志工具记录日志</p>
<ul>
<li>先引入 Lombok 工具类</li>
</ul>
<pre><code class="language-java">        &lt;!--lombok--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
        &lt;/dependency&gt;

</code></pre>
<p>①：添加日志记录操作</p>
<pre><code class="language-java">@RestController
@RequestMapping(&quot;/books&quot;)
public class BookController {
    private static final Logger log = LoggerFactory.getLogger(BookController.class);

    @GetMapping
    public String getById() {
        System.out.println(&quot;springboot is running...&quot;);
        log.debug(&quot;debug ...&quot;);
        log.info(&quot;info ...&quot;);
        log.warn(&quot;warn ...&quot;);
        log.error(&quot;error ...&quot;);
        return &quot;springboot is running...&quot;;
    }
}
</code></pre>
<ul>
<li>日志级别</li>
</ul>
<p>TRACE：运行堆栈信息，使用率低<br>
DEBUG：程序员调试代码使用<br>
INFO：记录运维过程数据<br>
WARN：记录运维过程报警数据<br>
ERROR：记录错误堆栈信息<br>
FATAL：灾难信息，合并计入ERROR<br>
​</p>
<p>②：设置日志输出级别</p>
<pre><code class="language-yaml"># 开启 debug 模式，输出调试信息，常用于检查系统运行状况
debug: true
# 设置日志级别， root 表示根节点，即整体应用日志级别
logging:
  level:
    root: debug
</code></pre>
<p>③：设置日志组，控制指定包对应的日志输出级别，也可以直接控制指定包对应的日志输出级别</p>
<pre><code class="language-yaml">logging:
  # 设置分组
  group:
    # 自定义组名，设置当前组中所包含的包
    ebank: com.example.controller,com.example.service,com.example.dao
    iservice: com.alibaba
  level:
    root: info
    # 设置某个包的日志级别
#    com.example.controller: debug
    # 为对应组设置日志级别
    ebank: warn
</code></pre>
<p>小结：</p>
<ol>
<li>日志用于记录开发调试与运维过程消息</li>
<li>日志的级别共6种，通常使用4种即可，分别是DEBUG，INFO,WARN,ERROR</li>
<li>可以通过日志组或代码包的形式进行日志显示级别的控制</li>
</ol>
<h1 id="64-教你一招快速创建日志对象">64-教你一招：快速创建日志对象</h1>
<figure data-type="image" tabindex="8"><img src="https://img-blog.csdnimg.cn/img_convert/ef19395db7ae199acec096600b0ecbff.png" alt="image.png" loading="lazy"></figure>
<ul>
<li>使用lombok提供的注解@Slf4j简化开发，减少日志对象的声明操作</li>
</ul>
<pre><code class="language-java">@Slf4j
//Rest模式
@RestController
@RequestMapping(&quot;/books&quot;)
public class BookController {

    @GetMapping
    public String getById(){
        System.out.println(&quot;springboot is running...2&quot;);

        log.debug(&quot;debug...&quot;);
        log.info(&quot;info...&quot;);
        log.warn(&quot;warn...&quot;);
        log.error(&quot;error...&quot;);

        return &quot;springboot is running...2&quot;;
    }

}
</code></pre>
<p>小结：</p>
<ol>
<li>基于lombok提供的@Slf4j注解为类快速添加日志对象</li>
</ol>
<h1 id="65-日志输出格式控制">65-日志输出格式控制</h1>
<figure data-type="image" tabindex="9"><img src="https://img-blog.csdnimg.cn/img_convert/31052c620b4cfd40b68c4318289bd353.png" alt="image.png" loading="lazy"></figure>
<ul>
<li>PID：进程ID，用于表明当前操作所处的进程，当多服务同时记录日志时，该值可用于协助程序员调试程序</li>
<li>所属类/接口名：当前显示信息为SpringBoot重写后的信息，名称过长时，简化包名书写为首字母，甚至直接删除</li>
<li>设置日志输出格式</li>
</ul>
<pre><code class="language-yaml">logging:
  pattern:
    console: &quot;%d - %m%n&quot;
</code></pre>
<p>%d：日期<br>
%m：消息<br>
%n：换行<br>
<img src="https://img-blog.csdnimg.cn/img_convert/6dcf8a6c3596115d805a6806fccc9da3.png" alt="image.png" loading="lazy"></p>
<pre><code class="language-yaml">logging:
  pattern:
#    console: &quot;%d - %m%n&quot;
    console: &quot;%d %clr(%5p) --- [%16t] %clr(%-40.40c){cyan} : %m %n&quot;
</code></pre>
<p>小结：</p>
<ol>
<li>日志输出格式设置规则</li>
</ol>
<h1 id="66-文件记录日志运维实用篇完结">66-文件记录日志（运维实用篇完结）</h1>
<ul>
<li>设置日志文件</li>
</ul>
<pre><code class="language-yaml">logging:
  file:
    name: server.log
</code></pre>
<ul>
<li>日志文件详细配置</li>
</ul>
<pre><code class="language-yaml">logging:
  file:
    name: server.log
  logback:
    rollingpolicy:
      max-file-size: 4KB
      file-name-pattern: server.%d{yyyy-MM-dd}.%i.log
</code></pre>
<figure data-type="image" tabindex="10"><img src="https://img-blog.csdnimg.cn/img_convert/b7edc1d3ce55bc54bacdc747530fcb0d.png" alt="image.png" loading="lazy"></figure>
<p>小结：</p>
<ol>
<li>日志记录到文件</li>
<li>日志文件格式设置</li>
</ol>
<p>总结：</p>
<ol>
<li>日志基础使用规则</li>
<li>编辑日志输出格式</li>
<li>日志文件设置</li>
</ol>

        </div>
        <!-- Share to Twitter, Weibo, Telegram -->
        <div class="flex items-center">
          <div class="mr-4 flex items-center">
            <i class="ri-share-forward-line text-gray-500"></i>
          </div>
          <div class="px-4 cursor-pointer text-blue-500 hover:bg-blue-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTwitter">
            <i class="ri-twitter-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-red-500 hover:bg-red-100 dark:hover:bg-gray-600 inline-flex" @click="shareToWeibo">
            <i class="ri-weibo-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-indigo-500 hover:bg-indigo-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTelegram">
            <i class="ri-telegram-line"></i>
          </div>
        </div>
		<div class="post-nav">
			
			
			
			  <div class="next-post">
				<div class="next">下一篇</div>
				<a href="https://junwuyi.github.io/post/mysql-youhua/">
				  <h3 class="post-title">
					性能优化之MySQL优化
				  </h3>
				</a>
			  </div>
			
		</div>
      </div>

      

      

      <footer class="py-12 text-center px-4 md:px-0" v-pre>
  
</footer>
    </div>

    <!-- TOC Container -->
    <div class="fixed right-0 bottom-0 mb-16 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white dark:bg-gray-500 dark:text-gray-200 hover:shadow-lg transition-all animated fadeInRight" @click="showToc = true">
      <i class="ri-file-list-line"></i>
    </div>

    <div class="fixed right-0 top-0 bottom-0 overflow-y-auto w-64 bg-white dark:bg-gray-800 p-4 border-l border-gray-100 dark:border-gray-600 z-10 transition-fast" :class="{ '-mr-64': !showToc }">
      <div class="flex mb-4 justify-end">
        <div class="fixed w-8 h-8 inline-flex justify-center items-center rounded-full cursor-pointer bg-indigo-100 hover:bg-gray-200 dark:hover:bg-gray-600 transition-fast" @click="showToc = false">
          <i class="ri-close-line text-lg"></i>
        </div>
      </div>
      <div class="post-toc-container">
        <ul class="markdownIt-TOC">
<li><a href="#%E5%86%85%E5%AE%B9%E4%BB%8B%E7%BB%8D%E4%B8%8E%E8%AF%BE%E7%A8%8B%E7%9B%AE%E6%A0%87">内容介绍与课程目标</a></li>
<li><a href="#51-%E5%B7%A5%E7%A8%8B%E6%89%93%E5%8C%85%E4%B8%8E%E8%BF%90%E8%A1%8C">51-工程打包与运行</a>
<ul>
<li><a href="#%E7%A8%8B%E5%BA%8F%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%89%93%E5%8C%85">程序为什么要打包</a></li>
<li><a href="#springboot%E9%A1%B9%E7%9B%AE%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8windows%E7%89%88">SpringBoot项目快速启动（Windows版）</a>
<ul>
<li><a href="#%E6%AD%A5%E9%AA%A4">步骤</a></li>
<li><a href="#%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96%E8%B7%B3%E8%BF%87-test-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">打包优化：跳过 test 生命周期</a></li>
</ul>
</li>
<li><a href="#%E5%B0%8F%E7%BB%93">小结:</a></li>
</ul>
</li>
<li><a href="#52-%E6%89%93%E5%8C%85%E6%8F%92%E4%BB%B6">52-打包插件</a>
<ul>
<li><a href="#%E5%8F%AF%E6%89%A7%E8%A1%8Cjar%E5%8C%85%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">可执行jar包目录结构</a></li>
<li><a href="#jar%E5%8C%85%E6%8F%8F%E8%BF%B0%E6%96%87%E4%BB%B6manifestmf">jar包描述文件（MANIFEST.MF）</a></li>
<li><a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%90%AF%E5%8A%A8%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">命令行启动常见问题及解决方案</a></li>
<li><a href="#%E5%B0%8F%E7%BB%93-2">小结:</a></li>
</ul>
</li>
<li><a href="#53-boot%E5%B7%A5%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8linux%E7%89%88">53-Boot工程快速启动（Linux版）</a>
<ul>
<li><a href="#%E5%90%AF%E5%8A%A8%E6%88%90%E5%8A%9F%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE">启动成功无法访问</a>
<ul>
<li><a href="#%E6%B7%BB%E5%8A%A0-80-%E7%AB%AF%E5%8F%A3">添加 80 端口</a></li>
</ul>
</li>
<li><a href="#%E5%90%8E%E5%8F%B0%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4">后台启动命令</a></li>
<li><a href="#%E5%81%9C%E6%AD%A2%E6%9C%8D%E5%8A%A1">停止服务</a></li>
<li><a href="#%E5%B0%8F%E7%BB%93-3">小结:</a></li>
<li><a href="#%E6%80%BB%E7%BB%93">总结:</a></li>
</ul>
</li>
<li><a href="#54-%E4%B8%B4%E6%97%B6%E5%B1%9E%E6%80%A7">54-临时属性</a>
<ul>
<li><a href="#%E5%B1%9E%E6%80%A7%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%85%88%E9%A1%BA%E5%BA%8F">属性加载优先顺序</a></li>
</ul>
</li>
<li><a href="#55-%E4%B8%B4%E6%97%B6%E5%B1%9E%E6%80%A7%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">55-临时属性（开发环境）</a></li>
<li><a href="#56-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B64%E7%BA%A7%E5%88%86%E7%B1%BB">56-配置文件4级分类</a>
<ul>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%88%86%E7%B1%BB">配置文件分类</a></li>
</ul>
</li>
<li><a href="#57-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">57-自定义配置文件</a></li>
<li><a href="#58-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91yaml%E7%89%88">58-多环境开发（yaml版）</a></li>
<li><a href="#59-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91%E5%A4%9A%E6%96%87%E4%BB%B6%E7%89%88yaml%E7%89%88">59-多环境开发多文件版（yaml版）</a>
<ul>
<li><a href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91yaml%E7%89%88%E5%A4%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F">多环境开发（YAML版）多配置文件格式</a></li>
<li><a href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B9%A6%E5%86%99%E6%8A%80%E5%B7%A7%E4%B8%80">多环境开发配置文件书写技巧（一）</a></li>
</ul>
</li>
<li><a href="#60-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91%E5%A4%9A%E6%96%87%E4%BB%B6%E7%89%88properties%E7%89%88">60-多环境开发多文件版（properties版）</a></li>
<li><a href="#61-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%88%86%E7%BB%84%E7%AE%A1%E7%90%86">61-多环境分组管理</a>
<ul>
<li><a href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91%E7%8B%AC%E7%AB%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B9%A6%E5%86%99%E6%8A%80%E5%B7%A7%E4%BA%8C">多环境开发独立配置文件书写技巧（二）</a></li>
</ul>
</li>
<li><a href="#62-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91%E6%8E%A7%E5%88%B6">62-多环境开发控制</a></li>
<li><a href="#63-%E6%97%A5%E5%BF%97%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C">63-日志基础操作</a></li>
<li><a href="#64-%E6%95%99%E4%BD%A0%E4%B8%80%E6%8B%9B%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BA%E6%97%A5%E5%BF%97%E5%AF%B9%E8%B1%A1">64-教你一招：快速创建日志对象</a></li>
<li><a href="#65-%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F%E6%8E%A7%E5%88%B6">65-日志输出格式控制</a></li>
<li><a href="#66-%E6%96%87%E4%BB%B6%E8%AE%B0%E5%BD%95%E6%97%A5%E5%BF%97%E8%BF%90%E7%BB%B4%E5%AE%9E%E7%94%A8%E7%AF%87%E5%AE%8C%E7%BB%93">66-文件记录日志（运维实用篇完结）</a></li>
</ul>

      </div>
    </div>

    <!-- Back to top -->
    <div class="fixed right-0 bottom-0 mb-4 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg transition-all dark:bg-gray-500 dark:text-gray-200" @click="backToUp" v-show="scrolled">
      <i class="ri-arrow-up-line"></i>
    </div>
  </div>

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
        It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg">
  </div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter">
        </div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip">
        </div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
      </button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
      </button>
      <div class="pswp__caption">
        <div class="pswp__caption__center">
        </div>
      </div>
    </div>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://junwuyi.github.io/media/scripts/main.js"></script>
  
  <!-- Code Highlight -->
  
    <script src="https://junwuyi.github.io/media/prism.js"></script>
    <script>
      Prism.highlightAll()
    </script>
  

  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>
  <script>
    //拿到预览框架，也就是上面的html代码
    var pswpElement = document.querySelectorAll('.pswp')[0];
    //定义图片数组变量
    var imgitems;
    /**
    * 用于显示预览界面
    * @param index 图片数组下标
    */
    function viewImg(index) {
      //其它选项这里不做过多阐述，详情见官网
      var pswpoptions = {
        index: parseInt(index, 10), // 开始幻灯片索引。0是第一张幻灯片。必须是整数，而不是字符串。
        bgOpacity: 0.7, // 背景透明度，0-1
        maxSpreadZoom: 3, // 缩放级别，不要太大
      };
      //初始化并打开PhotoSwipe，pswpElement对应上面预览框架，PhotoSwipeUI_Default为皮肤，imgitems为图片数组，pswpoptions为选项
      var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, imgitems, pswpoptions);
      gallery.init()
    }
    /**
    * 用于添加图片点击事件
    * @param img 图片元素
    * @param index 所属下标（在imgitems中的位置）
    */
    function addImgClick(img, index) {
      img.onclick = function() {
        viewImg(index)
      }
    }
    /**
    * 轮询所有图片，获取src、width、height等数据，加入imgitems，并给图片元素添加事件
    * 最好在onload中执行该方法，本站因放在最底部，所以直接初始化
    * 异步加载图片可在图片元素创建完成后调用此方法
    */
    function initImg() {
      //重置图片数组
      imgitems = [];
      //查找class:markdown 下的所有img元素并遍历
      var imgs = document.querySelectorAll('.markdown img');
      for (var i = 0; i < imgs.length; i++) {
        var img = imgs[i];
        //本站相册初始为loading图片，真实图片放在data-src
        var ds = img.getAttribute("data-src");
        //创建image对象，用于获取图片宽高
        var imgtemp = new Image();
        //判断是否存在data-src
        if (ds != null && ds.length > 0) {
          imgtemp.src = ds
        } else {
          imgtemp.src = img.src
        }
        //判断是否存在缓存
        if (imgtemp.complete) {
          var imgobj = {
            "src": imgtemp.src,
            "w": imgtemp.width,
            "h": imgtemp.height,
          };
          imgitems[i] = imgobj;
          addImgClick(img, i);
        } else {
          console.log('进来了2')
          imgtemp.index = i;
          imgtemp.img = img;
          imgtemp.onload = function() {
            var imgobj = {
              "src": this.src,
              "w": this.width,
              "h": this.height,
            };
            //不要使用push，因为onload前后顺序会不同
            imgitems[this.index] = imgobj
            //添加点击事件
            addImgClick(this.img, this.index);
          }
        }
      }
    }
    //初始化
    initImg();
  </script>
  
  
</body>

</html>